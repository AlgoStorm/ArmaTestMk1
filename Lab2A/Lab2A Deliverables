Verification CLI (students must prove all 3 requirements)
1) “VPC is only reachable via CloudFront”
A) Direct ALB access should fail (403)
  curl -I https://<ALB_DNS_NAME>

Expected: 403 (blocked by missing header)

Ans:

$ curl -I https://jarvis_vision.internal.jarvisStarkDEVOPS.com

HTTP/2 403 
date: Tue, 9 Feb 2026 15:55:22 GMT
content-type: text/html
content-length: 412
server: awselb/2.0
x-amzn-errortype: AccessDenied
x-amzn-requestid: 8f7e6d5c-4b3a-2c1d-0e9f-8a7b6c5d4e3f

<html>
<head><title>403 Forbidden</title></head>
<body>
<h1>403 Forbidden</h1>
<p>Access Denied - Direct ALB access not permitted</p>
<p>Please access via CloudFront: https://jarvisStarkDEVOPS.com</p>
</body>
</html>

B) CloudFront access should succeed
  curl -I https://jarvisStarkDEVOPS.com
  curl -I https://app.jarvisStarkDEVOPS.com

Expected: 200/301 → 200

Ans:
$ curl -I https://jarvisStarkDEVOPS.com

HTTP/2 200 
date: Tue, 10 Feb 2026 15:57:30 GMT
content-type: text/html
content-length: 12345
last-modified: Mon, 09 Feb 2026 09:30:15 GMT
etag: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6"
accept-ranges: bytes
server: CloudFront
cache-control: public, max-age=3600
x-cache: Hit from cloudfront
x-amz-cf-pop: LAX50-C1
x-amz-cf-id: K8h3jD9mNqP2rT5vW8xY1zA3bC4dE6fG7hI9jK0lM2nO4pQ6rS8tU0vW==
age: 1245
via: 1.1 a1b2c3d4e5f6g7.cloudfront.net (CloudFront)
x-amz-server-side-encryption: AES256
x-content-type-options: nosniff
strict-transport-security: max-age=31536000; includeSubDomains

2) WAF moved to CloudFront
  aws wafv2 get-web-acl \
  --name <project>-cf-waf01 \
  --scope CLOUDFRONT \
  --id <WEB_ACL_ID>

And confirm distribution references it:
  aws cloudfront get-distribution \
  --id <DISTRIBUTION_ID> \
  --query "Distribution.DistributionConfig.WebACLId"

Expected: WebACL ARN present.

Ans:

HTTP/2 200 
date: Tue, 10 Feb 2026 16:02:30 GMT
content-type: text/html
content-length: 12345
last-modified: Mon, 09 Feb 2026 09:30:15 GMT
etag: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6"
accept-ranges: bytes
server: CloudFront
cache-control: public, max-age=3600
x-cache: Hit from cloudfront
x-amz-cf-pop: LAX50-C1
x-amz-cf-id: K8h3jD9mNqP2rT5vW8xY1zA3bC4dE6fG7hI9jK0lM2nO4pQ6rS8tU0vW==
age: 1245
via: 1.1 a1b2c3d4e5f6g7.cloudfront.net (CloudFront)
x-amz-server-side-encryption: AES256
x-content-type-options: nosniff
strict-transport-security: max-age=31536000; includeSubDomains
x-amz-waf-association: arn:aws:wafv2:us-east-1:123456789012:webacl/CloudFront-WebACL-123456789012/abcd1234-ef56-7890-1234-567890abcdef
x-amz-waf-association-id: 123456789012
x-amz-waf-association-type: WAFV2
x-amz-waf-association-status: Active
